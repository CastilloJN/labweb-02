<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contactanos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
    // Validación del lado del cliente utilizando JavaScript
    function validateForm() {
      // Seleccionar los campos de entrada del formulario
      const name = document.getElementById("name");
      const email = document.getElementById("email");
      const phone = document.getElementById("phone");
      const dob = document.getElementById("dob");
      const message = document.getElementById("message");

      // Verificar si todos los campos están llenados
      if (name.value.trim() === "" || email.value.trim() === "" || phone.value.trim() === "" || dob.value === "" || message.value.trim() === "") {
        alert("Por favor, llene todos los campos");
        name.focus();
        return false;
      }

      // Verificar si el correo electrónico es válido utilizando una expresión regular
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email.value)) {
        alert("Por favor, ingrese un correo electrónico válido");
        email.focus();
        return false;
      }

      // Verificar si el número de teléfono móvil es válido utilizando una expresión regular
      const phoneRegex = /^[0-9]{9}$/;
      if (!phoneRegex.test(phone.value)) {
        alert("Por favor, ingrese un número de teléfono móvil válido (9 dígitos)");
        phone.focus();
        return false;
      }

      // Verificar si la fecha de nacimiento es válida (no posterior a la fecha actual)
      const now = new Date();
      const dobDate = new Date(dob.value);
      if (dobDate > now) {
        alert("Por favor, ingrese una fecha de nacimiento válida");
        dob.focus();
        return false;
      }

      // Verificar si el mensaje tiene al menos 150 caracteres
      if (message.value.length < 150) {
        alert("Por favor, ingrese un mensaje de al menos 150 caracteres");
        message.focus();
        return false;
      }

      // Si todo está bien, enviar el formulario
      return true;
    }
    function submitForm() {
      // Obtener el formulario y los valores de entrada
      const form = document.getElementById("contact-form");
      const formData = new FormData(form);

      // Crear una nueva solicitud XMLHttpRequest
      const xhr = new XMLHttpRequest();

      // Configurar la solicitud
      xhr.open("POST", "confirma.html", true);

      // Enviar los valores del formulario
      xhr.send(formData);

      //Redireccionar a otro html
      xhr.onload = function () {
        if (xhr.status === 200) {
          window.location.href = "./confirma.html";
        }
      };
    }
  </script>

</head>

<body class="text-center">
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">ACME</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div>
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 nav justify-content-end">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/">Inicio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/nosotros">Nosotros</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/servicio">Nuestros Servicios</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/catalogo">Catalogo de Clientes</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/contacto">Contactenos</a>
          </li>
        </ul>

      </div>
    </div>
  </nav>
  <div class="container">
    <form id="contact-form" name="contactForm" method="POST" onsubmit="return validateForm()" action="confirma.html">
      <div class="form-group">
        <label for="name">Nombres y Apellidos:</label>
        <input type="text" class="form-control" id="name" name="name" required>
      </div>
      <div class="form-group">
        <label for="email">Correo Electrónico:</label>
        <input type="email" class="form-control" id="email" name="email" required>
      </div>
      <div class="form-group">
        <label for="phone">Teléfono Móvil:</label>
        <input type="tel" class="form-control" id="phone" name="phone" required>
      </div>
      <div class="form-group">
        <label for="dob">Fecha de Nacimiento:</label>
        <input type="date" class="form-control" id="dob" name="dob" required>
      </div>
      <div class="form-group">
        <label for="message">Mensaje:</label>
        <textarea class="form-control" id="message" name="message" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Enviar</button>
    </form>
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="js/validation.js"></script>

  </div>
</body>

</html>